# Задачи по использованию данных

Под каждую задачу:
  - делаем файл в котром разбираемся с вопросом и показываем, что получилось
    (.py/.ipynb)
  - записываем основной функционал в библиотеку .py
  - пишем тесты для проверки
  - используем библиотеку в дальнейшем анализе

См. также [NOTES.md](NOTES.md).

## 1. Качество данных:

- [ ] добавить названия отраслей из справочника ОКВЭД        
- [ ] проверены равенства и неравенства отчтености
- [ ] удалены "призраки" (компании с неправильной отчетностью)

Компании привязаны к фактическим отраслям:
- [ ] ввести новое поле `ok1bis` для "фактической" отрасли компании 
- [ ] сделать правило его заполнения (комбинация `ok1` и словаря по ИНН)

Полнота базы данных - 1:
  - [ ] в базе есть все крупные компании, которые есть в других рейтингах

Полнота базы данных - 2:
  - [ ] мы знаем долю от общего количества компаний
  - [ ] мы знаем долю от окаймляющих показателей (выпуск, ВВП, налоги, инвестиции)

Холдинги:
- [ ] сделан пример по простому холдингу (мало дочек, головная компания российская) 
- [ ] определен состав крупнейших холдингов (головная компаний и дочки) 
- [ ] выявлено дублирование (холдинги, управляющие компании)


## 2. Представление данных: 

Табличные:
- [ ] сделать выгрузку данных в разрезе крупных отраслей по отраслям
- [ ] сделать выгрузку по подотрасли, например, "лизинг", "кино", "футбольные клубы"

Графические:
- [ ] визуализация крупных компаний "карта экономики"

Комбинированные:
- [ ] "карточка компании"
- [ ] "карточка отрасли"

##  3. Финансовый анализ:

- [ ] проверка равенств и неравенств отчтености
- [ ] связи между парами показателей  
- [ ] типы компаний и ситуации
- [ ] коэффициенты (устойчивость, эффективность)
- [ ] модель кредитного скоринга компаний (Altman-Z)


### 4. Экономический анализ:

- [ ] активный рост продаж (кто, почему)
- [ ] инвестиции в основной капитал 
- [ ] банкротства
- [ ] отраслевая концентрация
- [ ] налоговая нагрузка на компании
- [ ] региональная экономика
- [ ] финансовые компании

## Инвестиции в основной капитал

- Какие компании активно инвестируют? 
- Как они финансиурют инвестиции?
- По каким счетам показывают?

## Растущие компании

- У кого растут продажи? 
- Есть ли закономерности?


## Визуализация: "карта экономики"

- [ ] [tile diagram](https://stackoverflow.com/questions/3282935/treemap-visualization-in-python)
- [ ] подготовка данных 
- [ ] комментарий, что показывает карта

## Финансовый анализ

1. Типовые финансовые коэффициенты, формулы, значения для групп компаний.

   - [Методика проведения анализа финансового состояния принципала ("правила 1017")](https://bit.ly/2MuzSLL)
   - [Методологические рекомендации по проведению анализа финансово-хозяйственной 
      деятельности организаций (Госкомстат, 2002)](https://bit.ly/2DspnFT)

2. Связи между показателями отчетности (например, прибыль - операционный денежный поток)


# Открытые вопросы

- Что в наборе данных поддается анализу с помощью регрессий или классификаций?
- У кого заполнена раздел 6? раздел 4?
- Что полезного можно взять из раздела 3?



```
### Демонстрационные примеры

1. Проверить правильность составления отчетности через равенства (например, `ta = tp`)
   и неравенства между переменными (например, `debt_long < tp_long`). 
 
   Добавление: доработать `test_dataset.py` c учетом `variables.py`.
               Что может быть причиной невыполнения этих критериев? 


# Oбъединить холдинги (Лукойл, Газпром, Евраз)
holding = {"Евраз": []}


# Особенности баланса компаний
# ============================

# холдинг, управляющая компания
# банкроты (платежи, чистые активы)
# малый бизнес
# торговля, посрденичество

# Круг вопросов
# =============

# Смотрим крупнейшие компнии
# смортим в разбивке по отраслям
# смортим и вычищаем холинги
# Не смотрим регоны
# Не смотрим банкротства

# Подготовка данных
# =================

# - выгрузка крупнейших компаний
# - объединить холдинги
# - присвоить фактическую отрасль
# - расхождения с рейтингами Эксперт, Коммерсант, РБК
# - соотнести с отраслевыми рэнкингами
# -
# - как соотносится данными отраслевой и макростатистики?
# - сохранить результаты в Excel

# Oформление
# ==========

# - применить boo.row.dequote в названиях
# - словарь с короткими названиями Росатом, Аэрофлот
# - график без экспонент
# - функция поиска по названиям !!!
# - функция

# Вопросы
# =======

# Что можем сказать о структуре бизнеса?
# Кто быстрее растет?
# Кто больше инвестирует?
# Кто больше платит налогов?

# Качество данных
# ===============

# нет графы прочие налоги
# нужны справочники,
# надо пониматькак вызодим на

# Ограничения
# ===========


# todo:
# - выгрузка с молочными продуками

# РАЗБИРАЕМ КРУПНЕЙШИЕ ПО ОТРАСЛЯМ

ok = sorted(bs.ok1.unique().tolist())
#Out[90]: [11, 15, 23, 24, 27, 34, 40, 45, 50, 51, 52, 60, 62, 63]

# pwr    Электроэнергия
# oil    Нефть и газ 23
# metal  Металлы 27
# metal  Химия и удобрения 24
# avia   Авиа
# rail   Железнодоложный транспорт
# retail Розничная торговля
# tab    Табак
# drink  Напитки
# auto   Автомобили
# mash   Машиностроение
# food   Продукты питания
# drug   Лекарства
# stroi  Строительство

# Продукт: ----------------------------

# вычищен Газпром
# объединены холдинги
# рекласс в ok1
# перевод в новые категории
# вставки отсутсвующих балансов

# связб с отраслевой статистикой
# формы собственности, иностранная

# прототиn публикации
# записатьв doi
# выйти по прошлым годам на ЭКР


  
# Цель - проанализировать крупнейшие по отраслям
#        по вкладу в ВВП, расходам на труд, налогам, капитализации,
#        характеру бизнеса (производсвтенный/торговый),
#        инвестициям в основной капитал,
#        выплатам акционерам
#        посмотреть концентрацию в отраслях    

```
